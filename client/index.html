<!DOCTYPE html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script src="/query.js"></script>
<script src="/states/gameList.js"></script>
<script src="/states/gameLobby.js"></script>
<script src="/stateFactory.js"></script>
<script src="/state.js"></script>
<link rel="stylesheet" href="/s.css"></link>
</head>
<body id="body">
<div id="headerWrapper">
  Connecting...
</div>
<div id="welcomeWrapper">
  <table>
    <thead>
      <tr>
        <th>Game Name</th>
        <th>Host</th>
        <th>Players</th>
      </tr>
    </thead>
    <tbody id="gamesList"></tbody>
  </table>
  <button id="createGameBtn">Create New Game</button>
</div>
<div id="gameWrapper" style="display:none">
  <ul id="usersList">
  </ul>
  <ul id="messagesList">
  </ul>
  <button id="startGameBtn">Start Game</button>
  <button id="endGameBtn">End Game</button>
  <canvas id="gameCanvas" width="800" height="800">
  </canvas>
</div>
<script id="templateGamesListItem" type="template">
<tr class="game-item" data-id="{{id}}">
  <td>{{id}}</td>
  <td>{{host}}</td>
  <td>{{count}}</td>
</tr>
</script>
<script id="templateWelcome" type="template">
Welcome, {{id}}! This is a game created for the js13kgames competition
</script>
<script id="templateUsersListItem" type="template">
<li>User: {{id}}</li>
</script>
<script id="templateMessagesListItem" type="template">
<li>{{msg}}</li>
</script>
<script>
(function(w) {
  var socket = io.connect('http://localhost:8080'),
      stateMachine = w.gameStates(w.stateFactory, socket);
  socket.on('connected', function(me) {
    stateMachine.push("gameList", {'me':me});
  });
})(window);
</script>
</body>
</html>