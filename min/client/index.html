<!DOCTYPE html>
<head>
<script src="/socket.io/socket.io.js"></script>
<script src="/query.js"></script>
<script src="/states/g/bg.js"></script>
<script src="/states/game.js"></script>
<script src="/states/gameList.js"></script>
<script src="/states/gameLobby.js"></script>
<script src="/stateFactory.js"></script>
<script src="/state.js"></script>
<link rel="stylesheet" href="/s.css"></link>
</head>
<body>
<div id="wrapper"></div>
<script id="gameListTemplate" type="template">
  <div id="headerWrapper">
    Connecting...
  </div>
  <div id="welcomeWrapper">
    <table>
      <thead>
        <tr>
          <th>Game Name</th>
          <th>Host</th>
          <th>Players</th>
        </tr>
      </thead>
      <tbody id="gamesList"></tbody>
    </table>
    <div>
      <button id="createGameBtn">Create New Game</button>
      <button id="refreshGamesBtn">Refresh Games</button
    </div>
  </div>
</script>
<script id="gameLobbyTemplate" type="template">
  <div id="gameWrapper">
    <ul id="usersList"></ul>
    <button id="startGameBtn">Start Game</button>
  </div>
</script>
<script id="gameTemplate" type="template">
  <div id="gameWrapper">
    <ul id="usersList"></ul>
    <div id="gameCounter"></div>
    <canvas id="gameCanvas"></canvas>
  </div>
</script>
<script id="templateGamesListItem" type="template">
<tr class="game-item" data-id="{{id}}">
  <td>{{id}}</td>
  <td>{{host}}</td>
  <td>{{count}}</td>
</tr>
</script>
<script id="templateWelcome" type="template">
Welcome, {{id}}! This is a game created for the js13kgames competition
</script>
<script id="templateUsersListItem" type="template">
<li style="color:{{color}}">User: {{id}}</li>
</script>
<script id="templateMessagesListItem" type="template">
<li>{{msg}}</li>
</script>
<script>
(function(w) {
  var socket = io.connect('http://localhost:8080'),
      stateMachine = w.gameStates(w.stateFactory, socket),
      fps = 1000/60;
  socket.on('connected', function(me) {
    w.me = me;
    stateMachine.push("gameList");
  });
  function update() {
    stateMachine.update();
    w.setTimeout(update, fps);
  }

  update();
})(window);
</script>
</body>
</html>